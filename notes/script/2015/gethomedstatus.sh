#!/bin/bash

. /etc/profile

for ((i=1;$i<4;i=$i+1)) do

if [ $i -eq 1 ]; then
echo "<tr><td><h2>35运营集群</h2></td></tr>"

slavesrv="192.168.35.101 192.168.35.102 192.168.35.103 192.168.35.104 192.168.35.105 192.168.35.106 192.168.35.107 192.168.35.108 192.168.35.109 192.168.35.110 192.168.35.111 192.168.35.111 192.168.35.113 192.168.35.114 192.168.35.115 192.168.35.116 192.168.35.117 192.168.35.118 192.168.35.119 192.168.35.120 192.168.35.121 192.168.35.122 192.168.35.123 192.168.35.124 192.168.35.125 192.168.35.126 192.168.35.127 192.168.35.128 192.168.35.130 192.168.35.131 192.168.35.132 192.168.35.133 192.168.35.134"
iacssrv="192.168.35.120 192.168.35.121 192.168.35.122 192.168.35.123 192.168.35.124  192.168.35.125 192.168.35.126 192.168.35.127 192.168.35.128 "
dtvsrv="192.168.35.116"
elif [ $i -eq 2 ]; then
echo "<tr><td><h2>33调试集群</h2></td></tr>"

#slavesrv="192.168.33.101 192.168.33.102 192.168.33.103 192.168.33.104 192.168.33.105 192.168.33.106 192.168.33.107 192.168.33.108 192.168.33.109 192.168.33.110 192.168.33.111 192.168.33.112 192.168.33.113 192.168.33.114 192.168.33.115 192.168.33.116 192.168.33.117 192.168.33.118 192.168.33.119 192.168.33.120 192.168.33.121 192.168.33.122 192.168.33.123 192.168.33.124 192.168.33.126 192.168.33.127 192.168.33.129 192.168.33.130 192.168.33.131 192.168.33.132 192.168.33.133 192.168.33.134 192.168.33.135 192.168.33.136 192.168.33.137 192.168.33.138"
slavesrv="192.168.101.131 192.168.101.132 192.168.101.133 192.168.101.134 192.168.101.135 192.168.101.136 192.168.101.137"
iacssrv=$slavesrv
dtvsrv="192.168.101.130"

else
echo "<tr><td><h3>36开发集群</h2></td></tr>"
slavesrv="192.168.36.101 192.168.36.102 192.168.36.103 192.168.36.104 192.168.36.105 192.168.36.106 192.168.36.107 192.168.36.108 192.168.36.109 192.168.36.110 192.168.36.111 192.168.36.112 192.168.36.113 192.168.36.114 192.168.36.115 192.168.36.116 192.168.36.117 192.168.36.118 192.168.36.119 192.168.36.120 192.168.36.121 192.168.36.122 192.168.36.123 192.168.36.124 192.168.36.126 192.168.36.127 192.168.36.129 192.168.36.130 192.168.36.131 192.168.36.132"

iacssrv="192.168.36.110 192.168.36.111 192.168.36.112 192.168.36.113 192.168.36.114 192.168.36.115 192.168.36.116 192.168.36.117 192.168.36.118 192.168.36.119"
dtvsrv="192.168.36.109"

fi
echo "<tr><td>===slave===</td></tr>"

for srv in $slavesrv ; do
echo "<tr><td>$srv"
d1=`date`
wget --tries=1 --timeout=4 -q "http://$srv:13160/recommend/get_top_recommend?accesstoken=TOKEN50000093&label=101|102|107|103&num=15|15|15|15&hdsize=163x198&sdsize=163x198&appsize=163x198&vodsize=163x198&chnlsize=163x198" -O reslave
[[ `grep -c "list" reslave` -eq 0 ]] && echo "<B><font color=red> Error </font></B> </td></tr>"
[[ `grep -c "list" reslave` -ne 0 ]] && echo "<B><font color=green> OK </font></B> </td></tr>"  
#cat reslave
rm reslave -f

#cat reslave
rm reslave -f
done;

echo "<tr><td></td></tr><tr><td>iacs</td></tr>"


for srv in $iacssrv; do
echo ""
echo "<tr><td>$srv "
d1=`date`
wget --tries=2 --timeout=5 -q "http://$srv:12690/getIaps" -O reiacs
[[ `grep -c "IP" reiacs` -eq 0 ]] && echo "<B><font color=red> Error </font></B> </td></tr>"
[[ `grep -c "IP" reiacs` -ne 0 ]] && echo "<B><font color=green> OK </font></B> </td></tr>"
#cat reiacs
rm reiacs -f
done;

echo "<tr><td>===dtvs===</td></tr>"
echo "<tr><td>$dtvsrv "
d1=`date`
#wget --tries=2 --timeout=5 -q "http://$dtvsrv:12890/media/transmission/get_list?accesstoken=TOKEN1000000&status=810|818|819|820|829|830|838|839|840|848|849|890|898|899|900|910|920|930|940&pagenum=50&pageidx=1" -O redtvs
wget --tries=2 --timeout=5 -q "http://$dtvsrv:12890/homed/release/get_list?label=103&accesstoken=TOKEN3590" -O redtvs
[[ `grep -c "type_list" redtvs` -eq 0 ]] && echo "<B><font color=red> Error </font></B> </td></tr>"
[[ `grep -c "type_list" redtvs` -ne 0 ]] && echo "<B><font color=green> OK </font></B> </td></tr>"
echo "<tr><td></td></tr>"
rm -f redtvs
done;
exit 0
